---
layout: classpass
---
<style>
  /* ── Page meta chips ── */
  .page-meta {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 0.25rem;
    flex-wrap: wrap;
  }

  .page-meta .chip {
    display: inline-flex;
    align-items: center;
    gap: 0.3rem;
    background: var(--cp-bg-subtle);
    color: var(--cp-text-secondary);
    font-size: 0.7rem;
    font-weight: 600;
    padding: 0.25rem 0.7rem;
    border-radius: 999px;
    letter-spacing: 0.03em;
    text-transform: uppercase;
  }

  .page-meta .chip svg {
    width: 11px;
    height: 11px;
    fill: currentColor;
    flex-shrink: 0;
  }

  /* ── Page content card ── */
  .page-content {
    background: var(--cp-bg);
    padding: 0;
  }

  /* ── Typography ── */
  .page-content h1 {
    font-family: var(--cp-font-display);
    font-size: 2.5rem;
    font-weight: 400;
    margin-bottom: 1.5rem;
    color: var(--cp-black);
    line-height: 1.1;
    letter-spacing: -0.01em;
  }

  @media (max-width: 640px) {
    .page-content h1 { font-size: 1.75rem; }
  }

  .page-content h2 {
    font-family: var(--cp-font-display);
    font-size: 1.35rem;
    font-weight: 600;
    margin-top: 2.5rem;
    margin-bottom: 0.75rem;
    color: var(--cp-black);
    line-height: 1.3;
    border-bottom: none;
    padding-bottom: 0;
  }

  .page-content h3 {
    font-size: 1rem;
    font-weight: 600;
    margin-top: 1.5rem;
    margin-bottom: 0.5rem;
  }

  .page-content p {
    margin-bottom: 1rem;
    color: var(--cp-text);
    font-size: 0.95rem;
  }

  .page-content > p:first-of-type {
    font-size: 1rem;
    color: var(--cp-text-secondary);
    line-height: 1.7;
  }

  /* ── Studio sections ── */
  .page-content .studio-section {
    display: flex;
    flex-direction: row;
    align-items: flex-start;
    gap: 0;
    margin: 2rem 0;
    padding-bottom: 2rem;
    border-bottom: 1px solid var(--cp-border);
  }

  .page-content .studio-section:last-of-type {
    border-bottom: none;
  }

  .page-content .studio-section .rank {
    display: block;
    font-family: var(--cp-font-display);
    font-size: 5rem;
    font-weight: 400;
    color: transparent;
    -webkit-text-stroke: 2px var(--cp-blue);
    text-stroke: 2px var(--cp-blue);
    line-height: 1;
    letter-spacing: 1px;
    text-align: center;
    width: 100px;
    flex-shrink: 0;
    padding-top: 0.15rem;
  }

  .page-content .studio-section .studio-body {
    flex: 1;
    min-width: 0;
  }

  .page-content .studio-section h2 {
    margin-top: 0;
    font-family: var(--cp-font-display);
    font-size: 1.75rem;
    font-weight: 400;
    color: var(--cp-black);
    line-height: 1.15;
  }

  @media (max-width: 640px) {
    .page-content .studio-section .rank {
      font-size: 3rem;
      width: 60px;
    }
    .page-content .studio-section h2 {
      font-size: 1.25rem;
    }
  }

  /* ── Blockquotes (reviews) ── */
  .page-content blockquote {
    border-left: none;
    background: var(--cp-bg-subtle);
    padding: 1rem 1.25rem;
    margin: 0.75rem 0;
    border-radius: 8px;
    font-style: italic;
    color: var(--cp-text-secondary);
    font-size: 0.9rem;
    line-height: 1.6;
    position: relative;
  }

  .page-content blockquote::before {
    content: '\201C';
    position: absolute;
    top: -0.15rem;
    left: 0.75rem;
    font-size: 2rem;
    color: var(--cp-text-light);
    font-style: normal;
    line-height: 1;
  }

  .page-content blockquote p {
    margin-bottom: 0;
    color: inherit;
    padding-left: 0.75rem;
  }

  /* ── Rating badges ── */
  .page-content .rating-line {
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
    background: transparent;
    padding: 0.25rem 0;
    font-size: 0.9rem;
    font-weight: 500;
    color: var(--cp-black);
    margin: 0.25rem 0 0.5rem;
  }

  .page-content .rating-line .stars {
    display: inline-flex;
    gap: 1px;
    color: var(--cp-blue);
    font-size: 0.85rem;
    letter-spacing: -1px;
  }

  .page-content .rating-line .stars .star-empty {
    color: var(--cp-border);
  }

  .page-content .rating-line .rating-num {
    font-weight: 500;
    color: var(--cp-black);
    margin-left: 0.15rem;
  }

  .page-content .rating-line .review-count {
    font-weight: 400;
    color: rgb(85, 85, 85);
    font-size: 0.85rem;
  }

  /* ── Links ── */
  .page-content a {
    color: var(--cp-blue);
    text-decoration: none;
    font-weight: 500;
    transition: color 0.15s;
  }

  .page-content a:hover {
    color: var(--cp-blue-dark);
    text-decoration: underline;
  }

  /* CTA links */
  .page-content .cta-button {
    display: inline-block;
    background: var(--cp-blue);
    color: white !important;
    padding: 0.6rem 1.5rem;
    border-radius: 999px;
    font-weight: 500;
    font-size: 0.9rem;
    margin-top: 0.5rem;
    transition: background 0.15s;
    text-decoration: none !important;
  }

  .page-content .cta-button:hover {
    background: var(--cp-blue-dark);
    color: white !important;
  }

  /* ── Lists ── */
  .page-content ol, .page-content ul {
    padding-left: 1.5rem;
    margin-bottom: 1rem;
  }

  .page-content li { margin-bottom: 0.4rem; font-size: 0.95rem; }

  /* ── HR ── */
  .page-content hr {
    border: none;
    border-top: 1px solid var(--cp-border);
    margin: 2rem 0;
  }

  /* ── Tables ── */
  .page-content table {
    width: 100%;
    border-collapse: collapse;
    margin: 1rem 0;
    font-size: 0.85rem;
  }

  .page-content th {
    background: var(--cp-bg-subtle);
    font-weight: 600;
    text-align: left;
    padding: 0.6rem 0.75rem;
    border-bottom: 2px solid var(--cp-border);
  }

  .page-content td {
    padding: 0.5rem 0.75rem;
    border-bottom: 1px solid var(--cp-border);
  }

  /* ── Compliance section (collapsible) ── */
  details.compliance-section {
    margin-top: 2.5rem;
    border: 1px solid var(--cp-border);
    border-radius: 8px;
    overflow: hidden;
    background: var(--cp-bg);
  }

  details.compliance-section summary {
    background: var(--cp-bg-subtle);
    padding: 0.85rem 1.25rem;
    cursor: pointer;
    font-weight: 600;
    font-size: 0.85rem;
    color: var(--cp-text-secondary);
    list-style: none;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    user-select: none;
  }

  details.compliance-section summary::-webkit-details-marker { display: none; }

  details.compliance-section summary .arrow {
    display: inline-block;
    transition: transform 0.2s ease;
    font-size: 0.65rem;
  }

  details.compliance-section[open] summary .arrow {
    transform: rotate(90deg);
  }

  details.compliance-section .compliance-body {
    padding: 1.25rem 1.5rem;
    font-size: 0.85rem;
    color: var(--cp-text-secondary);
    border-top: 1px solid var(--cp-border);
  }

  details.compliance-section .compliance-body h2,
  details.compliance-section .compliance-body h3 {
    font-size: 0.9rem;
    margin-top: 1rem;
    color: var(--cp-text);
  }

  details.compliance-section .compliance-body h2:first-child,
  details.compliance-section .compliance-body h3:first-child {
    margin-top: 0;
  }

  details.compliance-section .compliance-body ol { padding-left: 1.25rem; }
  details.compliance-section .compliance-body li { margin-bottom: 0.35rem; }

  /* ── Data source note ── */
  .data-source {
    margin-top: 1.5rem;
    font-size: 0.78rem;
    color: var(--cp-text-light);
    font-style: italic;
  }

  .data-source code {
    font-size: 0.75rem;
    background: var(--cp-bg-subtle);
    padding: 0.1em 0.35em;
    border-radius: 3px;
  }

  /* ── Back link ── */
  .back-link {
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
    font-size: 0.85rem;
    font-weight: 500;
    color: var(--cp-text-secondary);
    text-decoration: none;
    margin-bottom: 1.25rem;
  }

  .back-link:hover { color: var(--cp-blue); }

  /* ── Disclaimer ── */
  .page-disclaimer {
    font-size: 0.8rem;
    color: var(--cp-text-light);
    margin-top: 2rem;
  }
</style>

<a href="{{ '/lab/classpass-marketing-test/' | relative_url }}" class="back-link">&larr; All pages</a>

{% if page.city or page.tag %}
<div class="page-meta">
  {% if page.city %}<span class="chip"><svg viewBox="0 0 24 24"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>{{ page.city }}</span>{% endif %}
  {% if page.tag %}<span class="chip">{{ page.tag }}</span>{% endif %}
</div>
{% endif %}

<article class="page-content">
  {{ content }}
</article>

<script>
(function() {
  var content = document.querySelector('.page-content');
  if (!content) return;

  // 1. Wrap numbered studio headings in card sections with rank to the left
  var headings = content.querySelectorAll('h2');
  headings.forEach(function(h2) {
    var match = h2.textContent.match(/^(\d+)\.\s+/);
    if (match) {
      var num = match[1];
      // Create card wrapper (flex row)
      var card = document.createElement('div');
      card.className = 'studio-section';

      // Create rank number element
      var rankEl = document.createElement('span');
      rankEl.className = 'rank';
      rankEl.textContent = num;

      // Create body wrapper for content
      var body = document.createElement('div');
      body.className = 'studio-body';

      // Rewrite heading text (remove number prefix)
      h2.textContent = h2.textContent.replace(/^\d+\.\s+/, '');

      // Insert card before h2
      h2.parentNode.insertBefore(card, h2);
      card.appendChild(rankEl);
      card.appendChild(body);
      body.appendChild(h2);

      // Move siblings into body until next h2 or hr or details
      var next = card.nextSibling;
      while (next) {
        if (next.nodeType === 1) {
          if (next.tagName === 'H2' || next.tagName === 'HR' || next.tagName === 'DETAILS' ||
              (next.tagName === 'DIV' && next.className === 'studio-section')) break;
        }
        var toMove = next;
        next = next.nextSibling;
        body.appendChild(toMove);
      }
    }
  });

  // 2. Collapse the compliance checklist
  var allH2 = content.querySelectorAll('h2');
  var complianceH2 = null;
  for (var i = 0; i < allH2.length; i++) {
    if (allH2[i].textContent.toLowerCase().indexOf('compliance') !== -1) {
      complianceH2 = allH2[i];
      break;
    }
  }

  if (complianceH2) {
    // Check if it's inside a studio-section (shouldn't be, but just in case)
    var parent = complianceH2.parentNode;
    if (parent.className === 'studio-section') {
      // Unwrap from studio section
      while (parent.firstChild) parent.parentNode.insertBefore(parent.firstChild, parent);
      parent.remove();
    }

    var prev = complianceH2.previousElementSibling;
    if (prev && prev.tagName === 'HR') prev.remove();

    var details = document.createElement('details');
    details.className = 'compliance-section';
    var summary = document.createElement('summary');
    summary.innerHTML = '<span class="arrow">&#9654;</span> Compliance Checklist';
    details.appendChild(summary);

    var body = document.createElement('div');
    body.className = 'compliance-body';

    complianceH2.parentNode.insertBefore(details, complianceH2);
    while (details.nextSibling) {
      body.appendChild(details.nextSibling);
    }
    details.appendChild(body);
  }

  // 3. Style rating lines with blue stars based on rating value
  function buildStars(rating) {
    var full = Math.floor(rating);
    var half = (rating - full) >= 0.25 ? 1 : 0;
    var empty = 5 - full - half;
    var html = '<span class="stars">';
    for (var s = 0; s < full; s++) html += '&#9733;';
    if (half) html += '&#9733;'; // show as full star for .5+ ratings
    for (var e = 0; e < empty; e++) html += '<span class="star-empty">&#9733;</span>';
    html += '</span>';
    return html;
  }

  var paragraphs = content.querySelectorAll('p');
  for (var j = 0; j < paragraphs.length; j++) {
    var p = paragraphs[j];
    var strong = p.querySelector('strong');
    if (strong && strong.textContent.toLowerCase().indexOf('rating') !== -1 && !p.querySelector('a')) {
      p.className = 'rating-line';
      var text = p.textContent.replace(/Rating:\s*/, '');
      var parts = text.match(/([\d.]+)\s*(.*)/);
      if (parts) {
        var ratingVal = parseFloat(parts[1]);
        var starsHtml = buildStars(ratingVal);
        p.innerHTML = starsHtml + ' <span class="rating-num">' + parts[1] + '</span> <span class="review-count">' + parts[2] + '</span>';
      } else {
        p.innerHTML = buildStars(5) + ' ' + p.innerHTML;
      }
    }
  }

  // 4. Style data source lines
  var allP = content.querySelectorAll('p');
  for (var k = 0; k < allP.length; k++) {
    if (allP[k].textContent.toLowerCase().indexOf('data sourced from') !== -1) {
      allP[k].className = 'data-source';
    }
  }

  // 5. Style CTA links
  var links = content.querySelectorAll('a[href*="classpass.com"]');
  for (var l = 0; l < links.length; l++) {
    var link = links[l];
    var href = link.getAttribute('href');
    if (href && (href.indexOf('/classes') !== -1 || href.indexOf('/search') !== -1 || href.indexOf('explore') !== -1)) {
      link.className = 'cta-button';
    }
  }
})();
</script>
